<h2>Add a Comment!</h2>

<% flash.each do |name, message| %>
  <div class="<%= name %>-flash">
    <%= message %>
  </div>
<% end %>

<%= form_with(model: [:user, :post, @comment], local: true, class: 'comment-form') do |form| %>
  <div>
    <% if @comment.errors.any? %>
      <div class="error-flash">
        <%= "Error: #{pluralize(@comment.errors.count, 'error')} prohibited this comment from being saved." %>
      </div>
      <ul>
        <% @comment.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    <% end %>

    <%= form.label :text %>
    <%= form.text_area :text %>
    <%= form.hidden_field :user_id, value: params[:user_id] %>
    <%= form.hidden_field :post_id, value: params[:post_id] %>
    <%= form.submit "Add Comment" %>
  </div>
<% end %>
